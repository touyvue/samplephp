function shareAccount(n,t,r,u){acctRightsArr=[];acctIdInfoArr=[];$("#myModalAdd").modal("show");$("#eShaType").text("Update Sharing");incomeSubmit="yes";incomeSubmit=="yes"&&$.post("m_momax/setting/m_inc/getmemrights.php",{mid:t,sid:n,num:u,state:"info"},function(t,f){if(f=="success"){for(tempDiv=t.indexOf("<=>"),tempAcctCt=t.indexOf("<#>"),memInfo=t.substr(0,tempDiv),acctRights=t.substr(tempDiv+3,tempAcctCt-(tempDiv+3)),acctIdInfo=t.substr(tempAcctCt+3),objMemInfo=JSON.parse(memInfo),name=objMemInfo.first+" "+objMemInfo.last,objAcctIdInfo=JSON.parse(acctIdInfo),acctIdInfoArr.length=0,acctIdInfoArr=$.map(objAcctIdInfo,function(n){return n}),objAcctRights=JSON.parse(acctRights),acctRightsArr.length=0,acctRightsArr=$.map(objAcctRights,function(n){return n}),u==1&&$("#eShaWith").text("Share Accounts with "+name),u==2&&$("#eShaWith").text("Share Budgets with "+name),u==3&&$("#eShaWith").text("Share Projects with "+name),allAcctIDs="",i=0;i<r;i++)document.getElementById("a"+acctIdInfoArr[i]).checked=!1,document.getElementById("b"+acctIdInfoArr[i]).checked=!1,document.getElementById("c"+acctIdInfoArr[i]).checked=!1,document.getElementById("d"+acctIdInfoArr[i]).checked=!1,allAcctIDs=i==r-1?allAcctIDs+acctIdInfoArr[i]:allAcctIDs+acctIdInfoArr[i]+",";for($("#allid").val(allAcctIDs),$("#proid").val(n),$("#numPro").val(u),i=0;i<r;i++)acctRightsArr[i]==0&&(document.getElementById("a"+acctIdInfoArr[i]).checked=!0),acctRightsArr[i]==1&&(document.getElementById("b"+acctIdInfoArr[i]).checked=!0),acctRightsArr[i]==2&&(document.getElementById("c"+acctIdInfoArr[i]).checked=!0),acctRightsArr[i]==3&&(document.getElementById("d"+acctIdInfoArr[i]).checked=!0)}else alert("System is ecountering issue and cannot save data at this point.")})}$(document).ready(function(){$("#updateShareAccount").click(function(){for(acctIdArr=[],allid=$("#allid").val(),acctIdArr=allid.split(","),acctIdArrLength=acctIdArr.length,accRights="",i=0;i<acctIdArrLength;i++)rightFlag="no",document.getElementById("a"+acctIdArr[i]).checked==!0&&(accRights=i==acctIdArrLength-1?accRights+"0":accRights+"0,"),document.getElementById("b"+acctIdArr[i]).checked==!0&&(accRights=i==acctIdArrLength-1?accRights+"1":accRights+"1,"),document.getElementById("c"+acctIdArr[i]).checked==!0&&(accRights=i==acctIdArrLength-1?accRights+"2":accRights+"2,"),document.getElementById("d"+acctIdArr[i]).checked==!0&&(accRights=i==acctIdArrLength-1?accRights+"3":accRights+"3,");mid=$("#mid").val();proid=$("#proid").val();num=$("#numPro").val();incomeSubmit="yes";incomeSubmit=="yes"&&$.post("m_momax/setting/m_inc/getmemrights.php",{mid:mid,sid:proid,allid:allid,num:num,rights:accRights,state:"change"},function(n,t){t=="success"?($("#myModalAdd").modal("hide"),location.reload()):alert("System is ecountering issue and cannot save data at this point.")})})})